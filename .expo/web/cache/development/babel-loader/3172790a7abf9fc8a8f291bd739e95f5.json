{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport Recorder from \"./recorder\";\nvar microphoneStream;\nvar rec = Recorder;\nvar input;\nexport function startRecording(_ref) {\n  var audioContext, errHandler, onStreamLoad, stream;\n  return _regeneratorRuntime.async(function startRecording$(_context) {\n    while (1) {\n      switch (_context.prev = _context.next) {\n        case 0:\n          audioContext = _ref.audioContext, errHandler = _ref.errHandler, onStreamLoad = _ref.onStreamLoad;\n          _context.prev = 1;\n          _context.next = 4;\n          return _regeneratorRuntime.awrap(navigator.mediaDevices.getUserMedia({\n            audio: true\n          }));\n\n        case 4:\n          stream = _context.sent;\n\n          if (onStreamLoad) {\n            onStreamLoad();\n          }\n\n          microphoneStream = stream;\n          input = audioContext.createMediaStreamSource(stream);\n          rec = new Recorder(input);\n          rec.record();\n          return _context.abrupt(\"return\", stream);\n\n        case 13:\n          _context.prev = 13;\n          _context.t0 = _context[\"catch\"](1);\n          console.log(_context.t0);\n\n          if (errHandler) {\n            errHandler();\n          }\n\n        case 17:\n        case \"end\":\n          return _context.stop();\n      }\n    }\n  }, null, null, [[1, 13]], Promise);\n}\nexport function stopRecording(_ref2) {\n  var exportWAV = _ref2.exportWAV,\n      wavCallback = _ref2.wavCallback;\n  rec.stop();\n  microphoneStream.getAudioTracks()[0].stop();\n\n  if (exportWAV && wavCallback) {\n    rec.exportWAV(function (blob) {\n      return wavCallback(blob);\n    });\n  }\n\n  rec.clear();\n}","map":{"version":3,"names":["Recorder","microphoneStream","rec","input","startRecording","audioContext","errHandler","onStreamLoad","navigator","mediaDevices","getUserMedia","audio","stream","createMediaStreamSource","record","console","log","stopRecording","exportWAV","wavCallback","stop","getAudioTracks","blob","clear"],"sources":["/Users/sandeepjain/Routine-Remind/screens/StudentScreen/Hooks/recorderHelpers.js"],"sourcesContent":["import Recorder from './recorder';\n\nlet microphoneStream; // stream from getUserMedia()\nlet rec = Recorder; // Recorder.js object\nlet input; // MediaStreamAudioSourceNode we'll be recording\n\n/**\n *\n * @param {{\n * audioContext: AudioContext\n * errHandler?: () => void\n * onStreamLoad?: () => void\n * }}\n * @returns {Promise<MediaStream>}\n */\nexport async function startRecording({\n  audioContext,\n  errHandler,\n  onStreamLoad,\n}) {\n  try {\n    const stream = await navigator.mediaDevices.getUserMedia({ audio: true });\n\n    if (onStreamLoad) {\n      onStreamLoad();\n    }\n\n    /*  assign stream for later use  */\n    microphoneStream = stream;\n\n    /* use the stream */\n    input = audioContext.createMediaStreamSource(stream);\n\n    rec = new Recorder(input);\n\n    // start the recording process\n    rec.record();\n\n    return stream;\n  } catch (err) {\n    console.log(err);\n\n    if (errHandler) {\n      errHandler();\n    }\n  }\n}\n\n/**\n *\n * @param {{\n * exportWAV: boolean\n * wavCallback?: (blob: Blob) => void\n * }}\n */\nexport function stopRecording({ exportWAV, wavCallback }) {\n  // stop recorder.js recording\n  rec.stop();\n\n  // stop microphone access\n  microphoneStream.getAudioTracks()[0].stop();\n\n  // create the wav blob\n  if (exportWAV && wavCallback) {\n    rec.exportWAV((blob) => wavCallback(blob));\n  }\n\n  rec.clear();\n}\n"],"mappings":";AAAA,OAAOA,QAAP;AAEA,IAAIC,gBAAJ;AACA,IAAIC,GAAG,GAAGF,QAAV;AACA,IAAIG,KAAJ;AAWA,OAAO,SAAeC,cAAf;EAAA;EAAA;IAAA;MAAA;QAAA;UACLC,YADK,QACLA,YADK,EAELC,UAFK,QAELA,UAFK,EAGLC,YAHK,QAGLA,YAHK;UAAA;UAAA;UAAA,iCAMkBC,SAAS,CAACC,YAAV,CAAuBC,YAAvB,CAAoC;YAAEC,KAAK,EAAE;UAAT,CAApC,CANlB;;QAAA;UAMGC,MANH;;UAQH,IAAIL,YAAJ,EAAkB;YAChBA,YAAY;UACb;;UAGDN,gBAAgB,GAAGW,MAAnB;UAGAT,KAAK,GAAGE,YAAY,CAACQ,uBAAb,CAAqCD,MAArC,CAAR;UAEAV,GAAG,GAAG,IAAIF,QAAJ,CAAaG,KAAb,CAAN;UAGAD,GAAG,CAACY,MAAJ;UArBG,iCAuBIF,MAvBJ;;QAAA;UAAA;UAAA;UAyBHG,OAAO,CAACC,GAAR;;UAEA,IAAIV,UAAJ,EAAgB;YACdA,UAAU;UACX;;QA7BE;QAAA;UAAA;MAAA;IAAA;EAAA;AAAA;AAwCP,OAAO,SAASW,aAAT,QAAmD;EAAA,IAA1BC,SAA0B,SAA1BA,SAA0B;EAAA,IAAfC,WAAe,SAAfA,WAAe;EAExDjB,GAAG,CAACkB,IAAJ;EAGAnB,gBAAgB,CAACoB,cAAjB,GAAkC,CAAlC,EAAqCD,IAArC;;EAGA,IAAIF,SAAS,IAAIC,WAAjB,EAA8B;IAC5BjB,GAAG,CAACgB,SAAJ,CAAc,UAACI,IAAD;MAAA,OAAUH,WAAW,CAACG,IAAD,CAArB;IAAA,CAAd;EACD;;EAEDpB,GAAG,CAACqB,KAAJ;AACD"},"metadata":{},"sourceType":"module"}